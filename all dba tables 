-- Create a temporary table to store databases to omit
CREATE TABLE #OmittedDatabases (DatabaseName NVARCHAR(128));
INSERT INTO #OmittedDatabases (DatabaseName)
VALUES ('master'), ('model'), ('msdb'), ('tempdb'), ('SSISDB'), ('TEST1');

DECLARE @SQL NVARCHAR(MAX) = '';

-- Build dynamic SQL to query all user databases not in the omitted list
SELECT @SQL = @SQL + 
'SELECT 
    ''' + name + ''' AS DatabaseName,
    s.name AS SchemaName,
    t.name AS TableName,
    c.name AS ColumnName,
    ty.name AS DataType,
    CASE 
        WHEN ty.name IN (''char'', ''varchar'', ''nchar'', ''nvarchar'') 
            THEN ty.name + ''('' + CASE WHEN c.max_length = -1 THEN ''MAX'' ELSE CAST(c.max_length AS VARCHAR(10)) END + '')''
        WHEN ty.name IN (''decimal'', ''numeric'') 
            THEN ty.name + ''('' + CAST(c.precision AS VARCHAR(10)) + '','' + CAST(c.scale AS VARCHAR(10)) + '')''
        ELSE ty.name
    END AS FullDataType
FROM ' + QUOTENAME(name) + '.sys.tables t
INNER JOIN ' + QUOTENAME(name) + '.sys.schemas s ON t.schema_id = s.schema_id
INNER JOIN ' + QUOTENAME(name) + '.sys.columns c ON t.object_id = c.object_id
INNER JOIN ' + QUOTENAME(name) + '.sys.types ty ON c.system_type_id = ty.system_type_id
UNION ALL '
FROM sys.databases
WHERE name NOT IN (SELECT DatabaseName FROM #OmittedDatabases);

-- Remove the trailing 'UNION ALL '
SET @SQL = LEFT(@SQL, LEN(@SQL) - LEN('UNION ALL '));

-- Drop the temporary table
DROP TABLE #OmittedDatabases;

-- Execute the dynamic SQL
EXEC sp_executesql @SQL;